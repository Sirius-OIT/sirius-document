ソフトウェア_2023年度
==========

2023年度の目標・取り組み
------------
``先輩にインタビューして書く``

概要
----------
- STM32 Nucleo
- PC
で機体を制御している．

STM32 Nucleoについて
----------

PCからデータを受け取り，モータを制御する．

| **受信データのフォーマットは以下の通り**
.. code-block:: none
    
    {
        uint8 id,
        uint8 len,
        int16 linear.x,
        int16 angular.z,
    }

- id: ``1`` idに応じてデータの扱い方を変える
- len: ``4`` 以降のデータの長さ（バイト数）
- linear.x: ``-1200 ~ 1200`` 速度データ [mm/s] 
- angular.z: ``未明記`` 角速度データ [rad/s] 

| 速度，角速度のデータは16bitの整数値で表される．
| しかし，受信した際に8bitに分割されるので復元する必要がある．

| **分割されたデータのフォーマットは以下の通り**
.. code-block:: none

    data[0] : 速度データの上位8bit
    data[1] : 速度データの下位8bit
    data[2] : 角速度データの上位8bit
    data[3] : 角速度データの下位8bit

対向二輪型ロボットの移動計算
^^^^^^^^^^^^^^^^^^^^^^^^

| **計算入力**
| - 速度データ [mm/s] 
| - 角速度データ [rad/s]

| **計算出力**
| - 左モータのPulse幅
| - 右モータのPulse幅

| **計算方法**
.. math::

    \text{{左モータの速度}} = \text{{速度データ}} - \frac{{\text{{車輪間距離}}}}{2} \times \text{{角速度データ}}

    \text{{右モータの速度}} = \text{{速度データ}} + \frac{{\text{{車輪間距離}}}}{2} \times \text{{角速度データ}}
